@model MCR.Theme.ViewComponents.SiteWideSettingsViewModel

@*
    SiteWideSettings outputs ONLY:
    - Favicon and icons
    - Theme color
    - JSON-LD structured data (Organization)
    - Google Tag Manager

    SEO meta tags (description, keywords, og:*, twitter:*) are handled by
    Orchard's SeoMetaPart which outputs via <resources type="Meta" />
*@

@* Favicon and Icons *@
@if (!string.IsNullOrEmpty(Model.FaviconUrl))
{
    <link rel="icon" type="image/x-icon" href="@Model.FaviconUrl" />
    <link rel="shortcut icon" href="@Model.FaviconUrl" />
}
@if (!string.IsNullOrEmpty(Model.AppleTouchIconUrl))
{
    <link rel="apple-touch-icon" href="@Model.AppleTouchIconUrl" />
}

@* Theme Color *@
@if (!string.IsNullOrEmpty(Model.ThemeColor))
{
    <meta name="theme-color" content="@Model.ThemeColor" />
}

@* JSON-LD Structured Data - Organization/LegalService *@
@if (Model.HasOrganizationData)
{
    <script type="application/ld+json">
    {
        "@@context": "https://schema.org",
        "@@type": "LegalService",
        @if (!string.IsNullOrEmpty(Model.OrganizationName))
        {
            <text>"name": "@Html.Raw(System.Text.Encodings.Web.JavaScriptEncoder.Default.Encode(Model.OrganizationName))",</text>
        }
        @if (!string.IsNullOrEmpty(Model.OrganizationLogo))
        {
            <text>"logo": "@Model.OrganizationLogo",</text>
        }
        @if (!string.IsNullOrEmpty(Model.OrganizationPhone))
        {
            <text>"telephone": "@Html.Raw(Model.OrganizationPhone)",</text>
        }
        @if (!string.IsNullOrEmpty(Model.OrganizationEmail))
        {
            <text>"email": "@Model.OrganizationEmail",</text>
        }
        @if (!string.IsNullOrEmpty(Model.OrganizationAddress))
        {
            <text>"address": {
            "@@type": "PostalAddress",
            "streetAddress": "@Html.Raw(System.Text.Encodings.Web.JavaScriptEncoder.Default.Encode(Model.OrganizationAddress))"
        },</text>
        }
        "url": "@Context.Request.Scheme://@Context.Request.Host"
    }
    </script>
}

@* Google Tag Manager - Head Script *@
@if (!string.IsNullOrEmpty(Model.GoogleTagManagerId))
{
    <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','@Model.GoogleTagManagerId');
    </script>
}
