{
  "name": "MCR Theme Workflows",
  "displayName": "MCR Theme - Workflow Definitions",
  "description": "Workflow definitions for contact form submission handling with email notifications",
  "author": "MCR Solicitors",
  "website": "https://mcrsolicitors.co.uk",
  "version": "1.0.1",
  "issetuprecipe": false,
  "categories": ["Workflows"],
  "tags": ["mcr", "solicitors", "workflow", "contact", "email"],
  "steps": [
    {
      "name": "WorkflowType",
      "data": [
        {
          "WorkflowTypeId": "contactformworkflow001",
          "Name": "Contact Form Submission",
          "IsEnabled": true,
          "IsSingleton": false,
          "LockTimeout": 0,
          "LockExpiration": 0,
          "DeleteFinishedWorkflows": true,
          "Activities": [
            {
              "ActivityId": "httprequestevent001",
              "Name": "HttpRequestEvent",
              "X": 10,
              "Y": 100,
              "IsStart": true,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Contact Form POST"
                },
                "HttpMethod": "POST",
                "ValidateAntiforgeryToken": true,
                "TokenLifeSpan": 0
              }
            },
            {
              "ActivityId": "validaterecaptcha001",
              "Name": "ValidateReCaptchaTask",
              "X": 320,
              "Y": 100,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Validate ReCaptcha"
                }
              }
            },
            {
              "ActivityId": "emailtoadmin001",
              "Name": "EmailTask",
              "X": 640,
              "Y": 50,
              "IsStart": false,
              "Properties": {
                "Sender": {
                  "Expression": "support@mcrsolicitors.co.uk"
                },
                "Author": {
                  "Expression": "MCR Solicitors Website <support@mcrsolicitors.co.uk>"
                },
                "Recipients": {
                  "Expression": "{{ Request.Form[\"recipientEmail\"] | default: \"info@mcrsolicitors.co.uk\" }}"
                },
                "ReplyTo": {
                  "Expression": "{{ Request.Form.email }}"
                },
                "Subject": {
                  "Expression": "New Contact Form - {{ Request.Form.department | default: \"General Enquiry\" }}"
                },
                "Body": {
                  "Expression": "<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>New Contact Form Submission</title></head><body style=\"margin:0;padding:0;font-family:'Segoe UI',Arial,sans-serif;background-color:#f4f4f4;\"><table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#f4f4f4;\"><tr><td style=\"padding:30px 20px;\"><table role=\"presentation\" width=\"600\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin:0 auto;background-color:#ffffff;border-radius:8px;overflow:hidden;box-shadow:0 4px 6px rgba(0,0,0,0.1);\"><tr><td style=\"background:linear-gradient(135deg,#0d2137 0%,#1a3a5c 100%);padding:35px 40px;text-align:center;\"><img src=\"https://mcrsolicitors.co.uk/media/mcr_logo-01.png\" alt=\"MCR Solicitors\" style=\"max-width:200px;height:auto;margin-bottom:15px;\"><h1 style=\"color:#ffffff;margin:0;font-size:24px;font-weight:600;\">New Contact Form Submission</h1></td></tr><tr><td style=\"padding:40px;\"><table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\"><tr><td style=\"padding:15px 20px;background-color:#f8f9fa;border-left:4px solid #b8860b;margin-bottom:20px;\"><p style=\"margin:0;color:#0d2137;font-size:14px;font-weight:600;text-transform:uppercase;letter-spacing:1px;\">Contact Details</p></td></tr></table><table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-top:25px;\"><tr><td style=\"padding:12px 0;border-bottom:1px solid #eee;\"><span style=\"color:#666;font-size:13px;text-transform:uppercase;letter-spacing:0.5px;\">Name</span><p style=\"margin:5px 0 0;color:#0d2137;font-size:16px;font-weight:500;\">{{ Request.Form.name }}</p></td></tr><tr><td style=\"padding:12px 0;border-bottom:1px solid #eee;\"><span style=\"color:#666;font-size:13px;text-transform:uppercase;letter-spacing:0.5px;\">Email</span><p style=\"margin:5px 0 0;\"><a href=\"mailto:{{ Request.Form.email }}\" style=\"color:#b8860b;font-size:16px;text-decoration:none;\">{{ Request.Form.email }}</a></p></td></tr><tr><td style=\"padding:12px 0;border-bottom:1px solid #eee;\"><span style=\"color:#666;font-size:13px;text-transform:uppercase;letter-spacing:0.5px;\">Phone</span><p style=\"margin:5px 0 0;\"><a href=\"tel:{{ Request.Form.phone }}\" style=\"color:#b8860b;font-size:16px;text-decoration:none;\">{{ Request.Form.phone }}</a></p></td></tr>{% if Request.Form.department and Request.Form.department != \"\" %}<tr><td style=\"padding:12px 0;border-bottom:1px solid #eee;\"><span style=\"color:#666;font-size:13px;text-transform:uppercase;letter-spacing:0.5px;\">Department</span><p style=\"margin:5px 0 0;color:#0d2137;font-size:16px;\">{{ Request.Form.department }}</p></td></tr>{% endif %}<tr><td style=\"padding:20px 0 0;\"><span style=\"color:#666;font-size:13px;text-transform:uppercase;letter-spacing:0.5px;\">Message</span><div style=\"margin-top:10px;padding:20px;background-color:#f8f9fa;border-radius:6px;border:1px solid #e9ecef;\"><p style=\"margin:0;color:#333;font-size:15px;line-height:1.7;white-space:pre-wrap;\">{{ Request.Form.message }}</p></div></td></tr></table><table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin-top:30px;\"><tr><td style=\"background-color:#fff3cd;border:1px solid #ffc107;border-radius:6px;padding:20px;\"><p style=\"margin:0;color:#856404;font-size:14px;\"><strong style=\"color:#664d03;\">âš¡ ACTION REQUIRED:</strong> Please respond to this enquiry within 24 hours.</p></td></tr></table></td></tr><tr><td style=\"background-color:#0d2137;padding:30px 40px;text-align:center;\"><p style=\"margin:0 0 10px;color:#ffffff;font-size:13px;\">This message was sent from the MCR Solicitors website contact form.</p><p style=\"margin:0;color:#b8860b;font-size:12px;\">Submitted: {{ \"now\" | date: \"%A, %d %B %Y at %H:%M\" }}</p></td></tr></table></td></tr></table></body></html>"
                },
                "IsHtmlBody": true,
                "Bcc": {
                  "Expression": ""
                },
                "Cc": {
                  "Expression": ""
                },
                "ActivityMetadata": {
                  "Title": "Email to Admin"
                }
              }
            },
            {
              "ActivityId": "emailtouser001",
              "Name": "EmailTask",
              "X": 640,
              "Y": 200,
              "IsStart": false,
              "Properties": {
                "Sender": {
                  "Expression": "support@mcrsolicitors.co.uk"
                },
                "Author": {
                  "Expression": "MCR Solicitors <support@mcrsolicitors.co.uk>"
                },
                "Recipients": {
                  "Expression": "{{ Request.Form.email }}"
                },
                "ReplyTo": {
                  "Expression": "info@mcrsolicitors.co.uk"
                },
                "Subject": {
                  "Expression": "Thank you for contacting MCR Solicitors"
                },
                "Body": {
                  "Expression": "<!DOCTYPE html><html lang=\"en\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"><title>Thank You - MCR Solicitors</title></head><body style=\"margin:0;padding:0;font-family:'Segoe UI',Arial,sans-serif;background-color:#ffffff;\"><table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"background-color:#ffffff;\"><tr><td style=\"padding:30px 20px;\"><table role=\"presentation\" width=\"600\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin:0 auto;background-color:#ffffff;\"><tr><td style=\"padding:20px 0;border-bottom:1px solid #eee;\"><table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\"><tr><td style=\"width:200px;vertical-align:middle;\"><img src=\"https://mcrsolicitors.co.uk/media/mcr_logo-01.png\" alt=\"MCR Solicitors\" style=\"max-width:180px;height:auto;\"></td><td style=\"text-align:right;vertical-align:middle;\"><img src=\"https://mcrsolicitors.co.uk/media/lexcel-badge.png\" alt=\"LEXCEL Accredited\" style=\"max-width:100px;height:auto;\"></td></tr></table></td></tr><tr><td style=\"padding:30px 0;\"><p style=\"margin:0 0 20px;color:#0d2137;font-size:16px;\">Dear <strong>{{ Request.Form.name }}</strong>,</p><p style=\"margin:0 0 20px;color:#555;font-size:14px;line-height:1.7;\">Thank you for getting in touch with MCR Solicitors. We have received your enquiry and a member of our expert team will respond to you within <strong style=\"color:#0d2137;\">24 hours</strong>.</p><table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" style=\"margin:25px 0;background-color:#f8f9fa;border-left:3px solid #b8860b;\"><tr><td style=\"padding:20px;\"><p style=\"margin:0 0 10px;color:#0d2137;font-size:14px;font-weight:600;\">Your Submission Details:</p>{% if Request.Form.department and Request.Form.department != \"\" %}<p style=\"margin:0 0 8px;color:#666;font-size:13px;\"><strong>Department:</strong> {{ Request.Form.department }}</p>{% endif %}<p style=\"margin:0;color:#666;font-size:13px;\"><strong>Message:</strong> {{ Request.Form.message | truncate: 150 }}</p></td></tr></table><p style=\"margin:20px 0 0;color:#555;font-size:14px;line-height:1.6;\">If your matter is urgent, please call us directly on <a href=\"tel:+441614661280\" style=\"color:#0d2137;font-weight:600;text-decoration:none;\">0161 466 1280</a>.</p><p style=\"margin:25px 0 5px;color:#555;font-size:14px;\">Kind regards,</p><p style=\"margin:0;color:#0d2137;font-size:14px;font-weight:600;\">MCR Solicitors Team</p></td></tr><tr><td style=\"padding:25px 0;border-top:1px solid #eee;\"><table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\"><tr><td style=\"width:200px;vertical-align:top;\"><img src=\"https://mcrsolicitors.co.uk/media/mcr_logo-01.png\" alt=\"MCR Solicitors\" style=\"max-width:150px;height:auto;margin-bottom:10px;\"><p style=\"margin:0;color:#0d2137;font-size:12px;\"><strong>SOLICITORS</strong></p></td><td style=\"text-align:right;vertical-align:top;\"><img src=\"https://mcrsolicitors.co.uk/media/lexcel-badge.png\" alt=\"LEXCEL Accredited - Practice Management Standard - The Law Society\" style=\"max-width:80px;height:auto;\"></td></tr></table><p style=\"margin:15px 0 5px;color:#0d2137;font-size:13px;\"><strong>Direct:</strong> <a href=\"tel:+441614661280\" style=\"color:#0d2137;text-decoration:none;\">0161 466 1280</a></p><p style=\"margin:0 0 5px;color:#0d2137;font-size:13px;\"><a href=\"mailto:info@mcrsolicitors.co.uk\" style=\"color:#0d2137;text-decoration:none;\">info@mcrsolicitors.co.uk</a> | <a href=\"https://www.mcrsolicitors.co.uk\" style=\"color:#0d2137;text-decoration:none;\">www.mcrsolicitors.co.uk</a></p><p style=\"margin:0;color:#0d2137;font-size:13px;\">1024 Stockport Road, Manchester, M19 3WX</p></td></tr><tr><td style=\"padding:20px 0;border-top:1px solid #eee;\"><p style=\"margin:0;color:#666;font-size:11px;line-height:1.6;\">This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail. Please notify the sender immediately by e-mail if you have received this e-mail by mistake and delete this e-mail from your system. E-mail transmission cannot be guaranteed to be secured or error-free as information could be intercepted, corrupted, lost, destroyed, arrive late or incomplete, or contain viruses. The sender therefore does not accept liability for any errors or omissions in the contents of this message, which arise as a result of e-mail transmission. If verification is required then please request a hard-copy version.</p></td></tr></table></td></tr></table></body></html>"
                },
                "IsHtmlBody": true,
                "Bcc": {
                  "Expression": ""
                },
                "Cc": {
                  "Expression": ""
                },
                "ActivityMetadata": {
                  "Title": "Email to User (Confirmation)"
                }
              }
            },
            {
              "ActivityId": "httpresponse001",
              "Name": "HttpResponseTask",
              "X": 960,
              "Y": 100,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Success Response"
                },
                "HttpStatusCode": 200,
                "Content": {
                  "Expression": "{\"success\": true, \"message\": \"Thank you! Your message has been sent successfully.\"}"
                },
                "ContentType": {
                  "Expression": "application/json"
                }
              }
            },
            {
              "ActivityId": "httpresponseerror001",
              "Name": "HttpResponseTask",
              "X": 320,
              "Y": 280,
              "IsStart": false,
              "Properties": {
                "ActivityMetadata": {
                  "Title": "Captcha Error Response"
                },
                "HttpStatusCode": 400,
                "Content": {
                  "Expression": "{\"success\": false, \"message\": \"Please complete the captcha verification.\"}"
                },
                "ContentType": {
                  "Expression": "application/json"
                }
              }
            }
          ],
          "Transitions": [
            {
              "Id": 0,
              "SourceActivityId": "httprequestevent001",
              "SourceOutcomeName": "Done",
              "DestinationActivityId": "validaterecaptcha001"
            },
            {
              "Id": 0,
              "SourceActivityId": "validaterecaptcha001",
              "SourceOutcomeName": "Valid",
              "DestinationActivityId": "emailtoadmin001"
            },
            {
              "Id": 0,
              "SourceActivityId": "validaterecaptcha001",
              "SourceOutcomeName": "Invalid",
              "DestinationActivityId": "httpresponseerror001"
            },
            {
              "Id": 0,
              "SourceActivityId": "emailtoadmin001",
              "SourceOutcomeName": "Done",
              "DestinationActivityId": "emailtouser001"
            },
            {
              "Id": 0,
              "SourceActivityId": "emailtouser001",
              "SourceOutcomeName": "Done",
              "DestinationActivityId": "httpresponse001"
            }
          ]
        }
      ]
    }
  ]
}
